# 其他工具

## 1、 计算单位

根据传入值如果包含字母则原样返回，如果是纯数字则增加单位返回

```js
this.$m.util.unit('auto', 'px');
```

| 参数名称 | 说明 | 类型           | 可选值 | 默认值 |
| -------- | ---- | -------------- | ------ | ------ |
| value    | 值   | String、Number | -      | auto   |
| unit     | 单位 | String         | -      | px     |

## 2、 清除字符串空格

```js
this.$m.util.trim('value', 'both');
```

| 参数名称 | 说明 | 类型   | 可选值                                                              | 默认值 |
| -------- | ---- | ------ | ------------------------------------------------------------------- | ------ |
| value    | 值   | String | -                                                                   | -      |
| pos      | 位置 | String | both：前后空格<br/>left：左空格<br/>right：右空格<br/>all：所有空格 | both   |

## 3、 获取 URL 参数

```js
this.$m.util.getParams('name');
```

| 参数名称 | 说明 | 类型   | 可选值 | 默认值 |
| -------- | ---- | ------ | ------ | ------ |
| name     | 键值 | String | -      | -      |

## 4、 生成随机数

```js
this.$m.util.randomNumber(0, 10);
```

| 参数名称 | 说明   | 类型   | 可选值 | 默认值 |
| -------- | ------ | ------ | ------ | ------ |
| min      | 最小值 | Number | >= 0   | -      |
| max      | 最大值 | Number | > 0    | -      |

## 5、 生成随机字符串

```js
this.$m.util.randomString(20);
```

| 参数名称 | 说明     | 类型   | 可选值 | 默认值 |
| -------- | -------- | ------ | ------ | ------ |
| length   | 生成长度 | Number | -      | 32     |

## 6、 生成 UUID

```js
this.$m.util.guid(false);
```

| 参数名称 | 说明         | 类型    | 可选值      | 默认值 |
| -------- | ------------ | ------- | ----------- | ------ |
| bar      | 是否带中横杠 | Boolean | true、false | true   |

## 7、 对象深度合并

```js
this.$m.util.deepMerge({}, {});
```

| 参数名称 | 说明           | 类型   | 可选值 | 默认值 |
| -------- | -------------- | ------ | ------ | ------ |
| obj1     | 目标对象       | Object | -      | {}     |
| obj2     | 需要合并的对象 | Object | -      | {}     |

## 8、 深度克隆对象

```js
this.$m.util.deepClone({});
```

| 参数名称 | 说明           | 类型   | 可选值 | 默认值 |
| -------- | -------------- | ------ | ------ | ------ |
| obj      | 需要克隆的对象 | Object | -      | {}     |

## 9、 计算年龄

```js
this.$m.util.getAge('1998-11-11', 'Y岁M月D天');
```

| 参数名称 | 说明       | 类型   | 可选值 | 默认值         |
| -------- | ---------- | ------ | ------ | -------------- |
| birthday | 出生日期   | String | -      | -              |
| format   | 格式化样式 | String | -      | Y 岁 M 月 D 天 |

## 10、 格式化时间

```js
this.$m.util.dateFormat(new Date(), 'yyyy-mm-dd');
```

| 参数名称 | 说明       | 类型         | 可选值 | 默认值     |
| -------- | ---------- | ------------ | ------ | ---------- |
| value    | 日期       | String、date | -      | -          |
| format   | 格式化样式 | String       | -      | yyyy-mm-dd |

## 11、 转化显示时间

```js
this.$m.util.transTime(new Date());
```

| 参数名称 | 说明                                                                                                                                                                       | 类型         | 可选值 | 默认值                                                                                                 |
| -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------ | ------ | ------------------------------------------------------------------------------------------------------ |
| value    | 日期                                                                                                                                                                       | String、Date | -      | -                                                                                                      |
| opts     | 配置信息：<br/>just：小于 5 分钟显示<br/>minute：小于 1 小时显示<br/>hour：小于 24 小时显示<br/>day：小于 30 天显示<br/>month：小于 365 天显示<br/>format：超过 365 天显示 | Object       | -      | { just: '刚刚', minute: '分钟前', hour: '小时前', day: '天前', month: '个月前, 'format: 'yyyy-mm-dd' } |

## 12、 隐藏部分字符串

```js
this.$m.util.hideString('15100000000', 3, 7);
```

| 参数名称 | 说明     | 类型   | 可选值 | 默认值 |
| -------- | -------- | ------ | ------ | ------ |
| value    | 字符串   | String | -      | -      |
| start    | 开始位置 | Number | -      | 3      |
| end      | 结束位置 | Number | -      | 7      |

## 13、 计算两点距离

```js
this.$m.util.getDistance(0, 0, 1, 1);
```

| 参数名称 | 说明       | 类型   | 可选值 | 默认值 |
| -------- | ---------- | ------ | ------ | ------ |
| startX   | 开始横坐标 | Number | -      | -      |
| startY   | 开始纵坐标 | Number | -      | -      |
| endX     | 结束横坐标 | Number | -      | -      |
| endY     | 结束纵坐标 | Number | -      | -      |

<br/>

返回值：

| 名称        | 说明                                     | 类型   |
| ----------- | ---------------------------------------- | ------ |
| distanceTxt | 距离字符串，小于 1km 返回 m，否则返回 km | String |
| distanceNum | 距离数字                                 | Number |

## 14、 构建 URL 参数

```js
this.$m.util.transUrl('', {});
```

| 参数名称 | 说明     | 类型   | 可选值 | 默认值 |
| -------- | -------- | ------ | ------ | ------ |
| url      | 前缀地址 | String | -      | -      |
| data     | 参数     | Object | -      | -      |

## 15、 节流防抖

```js
this.$m.util.throttle.call(
    this,
    () => {
        console.log('1');
    },
    500,
    true
);
```

| 参数名称  | 说明                                     | 类型     | 可选值      | 默认值 |
| --------- | ---------------------------------------- | -------- | ----------- | ------ |
| fun       | 需要执行的方法                           | Function | -           | -      |
| wait      | 执行方法后相隔 wait 毫秒后才能再触发方法 | Number   | -           | 500    |
| immediate | 是否立即执行                             | Boolean  | true、false | true   |

## 16、 字符串去除非数字及小数点后转数字

```js
this.$m.util.transNumber('');
```

| 参数名称     | 说明         | 类型   | 可选值 | 默认值 |
| ------------ | ------------ | ------ | ------ | ------ |
| value        | 需要操作的值 | String | -      | -      |
| defaultValue | 默认返回值   | Number | -      | 0      |

## 17、 字符串，布尔值转布尔值

```js
this.$m.util.transBoolean('');
```

| 参数名称 | 说明         | 类型   | 可选值 | 默认值 |
| -------- | ------------ | ------ | ------ | ------ |
| value    | 需要操作的值 | String | -      | -      |

## 18、 相对当前地址组装 URL

```js
this.$m.util.localUrl('');
```

| 参数名称 | 说明     | 类型   | 可选值 | 默认值 |
| -------- | -------- | ------ | ------ | ------ |
| url      | 相对地址 | String | -      | -      |
